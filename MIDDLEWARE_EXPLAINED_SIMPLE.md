# üîß Middleware ‚Äî –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏

**–í–æ–ø—Ä–æ—Å:** –ß—Ç–æ —Ç–∞–∫–æ–µ Middleware –∏ –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

---

## üéØ –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ (–ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏):

**Middleware** = "–ü–æ—Å—Ä–µ–¥–Ω–∏–∫" –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–æ–º –∏ –æ—Ç–≤–µ—Ç–æ–º

### –ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ –∂–∏–∑–Ω–∏:

**–ë–µ–∑ Middleware:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –°–∞–π—Ç ‚Üí –û—Ç–≤–µ—Ç
(–≤—Å—ë —Å—Ä–∞–∑—É, –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫)
```

**–° Middleware:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Middleware (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –¥–æ–±–∞–≤–ª—è–µ—Ç headers) ‚Üí –°–∞–π—Ç ‚Üí –û—Ç–≤–µ—Ç
(–ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ –ø—É—Ç–∏)
```

**–í—ã–≤–æ–¥:** Middleware = "–ø–æ—Å—Ä–µ–¥–Ω–∏–∫", –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–ª—è–µ—Ç Security Headers –∫ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

---

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –Ω–∞—à–µ–º –±–ª–æ–≥–µ:

### –§–∞–π–ª: `src/middleware.ts`

**–ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç:**
1. **–ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç** –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∫ —Å–∞–π—Ç—É
2. **–î–æ–±–∞–≤–ª—è–µ—Ç** Security Headers (–∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
3. **–û—Ç–¥–∞—ë—Ç** —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –∑–∞—â–∏—Ç–æ–π

**–ü—Ä–∏–º–µ—Ä:**
```javascript
// –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É:
export const onRequest = async (context, next) => {
  // 1. –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç
  const response = await next();
  
  // 2. –î–æ–±–∞–≤–∏—Ç—å Security Headers
  response.headers.set('X-Frame-Options', 'DENY');
  response.headers.set('X-Content-Type-Options', 'nosniff');
  // ... –∏ –¥—Ä—É–≥–∏–µ
  
  // 3. –í–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç —Å headers
  return response;
};
```

---

## üìã –ß—Ç–æ –≤–∏–¥–Ω–æ –≤ –≤–∞—à–µ–º —Å–ª—É—á–∞–µ:

### –í Response Headers –≤–∏–¥–Ω–æ:
```
Referrer-Policy: strict-origin-when-cross-origin ‚úÖ
```

**–≠—Ç–æ –æ–¥–∏–Ω –∏–∑ Security Headers!** ‚úÖ

**–ù–æ –Ω–µ –≤–∏–¥–Ω–æ –¥—Ä—É–≥–∏—Ö:**
- `X-Frame-Options`
- `X-Content-Type-Options`
- `Strict-Transport-Security`
- `Content-Security-Policy`

---

## üîç –ü–æ—á–µ–º—É –Ω–µ –≤—Å–µ Headers –≤–∏–¥–Ω—ã:

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ –Ω–µ —Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
   - –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–ª–∞–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å (HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
   - –ù–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ —à—Ä–∏—Ñ—Ç–∞–º/–∫–∞—Ä—Ç–∏–Ω–∫–∞–º

2. **304 Not Modified:**
   - –ë—Ä–∞—É–∑–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à
   - Headers –º–æ–≥—É—Ç –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è

3. **Middleware –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª:**
   - –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å dev-—Å–µ—Ä–≤–µ—Ä

---

## ‚úÖ –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

### –®–∞–≥ 1: –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à

1. **–í DevTools:**
   - –í–∫–ª–∞–¥–∫–∞ "Network"
   - –ü–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É "Disable cache"
   - –ù–∞–∂–º–∏—Ç–µ `Ctrl+Shift+R` (hard refresh)

2. **–ò–ª–∏:**
   - –ó–∞–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–Ω–æ–≤–æ: `http://localhost:4321/marketlab-blog/`

---

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å

1. **–í DevTools ‚Üí Network:**
   - –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
   - –û–±—ã—á–Ω–æ —ç—Ç–æ `index` –∏–ª–∏ `marketlab-blog/`
   - –ù–ï –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `.woff`, `.jpg`, `.css`

2. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ Response Headers:**
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ Security Headers

---

### –®–∞–≥ 3: –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ –≤–∏–¥–Ω–æ

**–ü—Ä–æ–≤–µ—Ä—é –∫–æ–¥ middleware –∏ –∏—Å–ø—Ä–∞–≤–ª—é –ø—Ä–æ–±–ª–µ–º—É.**

---

## üîí –ü—Ä–æ HTTPS –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç:

### –ù–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –≤–∏–¥–Ω–æ:
- ‚úÖ URL: `hampfree-hub.github.io`
- ‚úÖ HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π)

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç:

1. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–∞–º–æ—á–µ–∫** (—Å–ª–µ–≤–∞ –æ—Ç URL)
2. **–ò–ª–∏:**
   - –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Üí "Inspect"
   - –í–∫–ª–∞–¥–∫–∞ "Security"
   - –¢–∞–º –±—É–¥–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ

**–ï—Å–ª–∏ –∑–∞–º–æ—á–µ–∫ –µ—Å—Ç—å ‚Äî —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–Ω—ã–π!** ‚úÖ

---

## üìã –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞–ª—å—à–µ:

### 1. Security Headers –≤ dev-—Ä–µ–∂–∏–º–µ:
- ‚úÖ `Referrer-Policy` –≤–∏–¥–µ–Ω (—Ö–æ—Ä–æ—à–∏–π –∑–Ω–∞–∫!)
- ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ Headers (–ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞)

### 2. HTTPS –Ω–∞ GitHub Pages:
- ‚úÖ HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç (–≤–∏–¥–Ω–æ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ)
- ‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–Ω—ã–π (–µ—Å–ª–∏ –∑–∞–º–æ—á–µ–∫ –µ—Å—Ç—å)

### 3. –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç:
- –°–æ–∑–¥–∞–º –æ—Ç—á—ë—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ü–æ–¥–≤–µ–¥—É –∏—Ç–æ–≥–∏ —á—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Security Headers –µ—â—ë —Ä–∞–∑** (–ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞)
2. **–ï—Å–ª–∏ –≤—Å—ë –æ–∫ ‚Üí —Å–æ–∑–¥–∞—Ç—å –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç**
3. **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É** (–¥–∏–∑–∞–π–Ω, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)

---

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–Ω–æ–≤–∞!** üîç

