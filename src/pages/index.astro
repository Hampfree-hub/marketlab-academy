---
// –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Market Lab Academy (8-–±–∏—Ç –¥–∏–∑–∞–π–Ω)
import ArchiveLore from '../components/ArchiveLore.astro';
import ArticleGrid from '../components/ArticleGrid.astro';
import CTABlock from '../components/CTABlock.astro';
import CookieBanner from '../components/CookieBanner.astro';
import SocialSidebar from '../components/SocialSidebar.astro';
import ThemeToggle from '../components/ThemeToggle.astro';
import { SITE_TITLE } from '../consts';
---

<!doctype html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>MarketLab Academy ‚Äî –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</title>
		<link rel="stylesheet" href="/src/styles/global.css" />
		<link rel="stylesheet" href="/src/styles/nes8bit.css" />
	</head>
	<body class="nes8bit-theme">
		<script>
			// Language switcher functionality (same as Header.astro)
			(function() {
				function getCurrentLanguage() {
					const htmlLang = document.documentElement.lang || 'ru';
					const savedLang = localStorage.getItem('preferred-language');
					return savedLang || htmlLang.toLowerCase().split('-')[0];
				}

				function updateActiveButton(lang) {
					document.querySelectorAll('.lang-button').forEach(button => {
						const buttonLang = button.getAttribute('data-lang');
						if (buttonLang === lang) {
							button.classList.add('active');
							button.setAttribute('aria-pressed', 'true');
						} else {
							button.classList.remove('active');
							button.setAttribute('aria-pressed', 'false');
						}
					});
				}

				function switchLanguage(lang) {
					localStorage.setItem('preferred-language', lang);
					document.documentElement.lang = lang;
					updateActiveButton(lang);
					document.querySelectorAll('[data-lang]').forEach(el => {
						const elLang = el.getAttribute('data-lang');
						if (elLang === lang) {
							el.style.display = '';
						} else {
							el.style.display = 'none';
						}
					});
					window.dispatchEvent(new CustomEvent('languageChanged', { detail: { lang } }));
				}

				document.addEventListener('DOMContentLoaded', () => {
					const currentLang = getCurrentLanguage();
					updateActiveButton(currentLang);
					document.querySelectorAll('.lang-button').forEach(button => {
						button.addEventListener('click', (e) => {
							e.preventDefault();
							const lang = button.getAttribute('data-lang');
							switchLanguage(lang);
						});
					});
				});
			})();
		</script>
		<!-- –ë–∞–Ω–Ω–µ—Ä –∫—É–∫–∏ -->
		<CookieBanner />
		
		<!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å —Å–æ—Ü—Å–µ—Ç—è–º–∏ -->
		<SocialSidebar />
		
		<div class="nes8bit-container">
			<!-- HEADER —Å –ª–æ—Ä–æ–º -->
			<div class="nes8bit-header">
				<h1>üß™ MARKETLAB ACADEMY</h1>
				<p>–¶–µ–Ω–Ω—ã–π –∞—Ä—Ö–∏–≤ | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</p>
			</div>
			
			<!-- NAVIGATION (sticky) -->
			<nav class="nes8bit-nav" aria-label="–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
				<div class="nes8bit-nav-links">
					<a href="#storage" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞–∑–¥–µ–ª—É –•—Ä–∞–Ω–∏–ª–∏—â–µ">üì¶ –•—Ä–∞–Ω–∏–ª–∏—â–µ</a>
					<a href="#strategies" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞–∑–¥–µ–ª—É –°—Ç—Ä–∞—Ç–µ–≥–∏–∏">üìä –°—Ç—Ä–∞—Ç–µ–≥–∏–∏</a>
					<a href="#analysis" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞–∑–¥–µ–ª—É –ê–Ω–∞–ª–∏–∑">üìà –ê–Ω–∞–ª–∏–∑</a>
					<a href="#experiments" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞–∑–¥–µ–ª—É –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã">‚öóÔ∏è –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã</a>
				</div>
				<div class="nes8bit-nav-controls">
					<ThemeToggle />
					<div class="language-switcher" role="group" aria-label="–í—ã–±–æ—Ä —è–∑—ã–∫–∞">
						<button class="lang-button active" data-lang="ru" aria-label="–†—É—Å—Å–∫–∏–π" aria-pressed="true">RU</button>
						<button class="lang-button" data-lang="en" aria-label="English" aria-pressed="false">EN</button>
						<button class="lang-button" data-lang="es" aria-label="Espa√±ol" aria-pressed="false">ES</button>
					</div>
				</div>
			</nav>
			
			<!-- –õ–û–† –ê–†–•–ò–í–ê -->
			<ArchiveLore />
			
			<!-- –ü–õ–ò–¢–ö–ê –°–¢–ê–¢–ï–ô -->
			<ArticleGrid />
			
			<!-- CTA-–ë–õ–û–ö -->
			<CTABlock />
			
			
			<!-- FOOTER -->
			<footer class="nes8bit-footer">
				<div class="footer-content">
					<!-- –°–æ—Ü—Å–µ—Ç–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö (–Ω–∞–¥ –Ω–∞–¥–ø–∏—Å—å—é) -->
					<div class="footer-social-mobile">
						<a href="https://t.me/hampfree_market_lab" target="_blank" rel="noopener noreferrer" class="footer-social-link" aria-label="Telegram –∫–∞–Ω–∞–ª Market Lab" title="Telegram">
							<span>üí¨</span>
						</a>
						<a href="https://dzen.ru/hampfree_algo_trading" target="_blank" rel="noopener noreferrer" class="footer-social-link" aria-label="–ö–∞–Ω–∞–ª –Ω–∞ –î–∑–µ–Ω–µ" title="–î–∑–µ–Ω">
							<span>üì∞</span>
						</a>
						<a href="https://vk.com/hampfree_market_lab" target="_blank" rel="noopener noreferrer" class="footer-social-link" aria-label="–ì—Ä—É–ø–ø–∞ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ" title="VK">
							<span>üì±</span>
						</a>
						<a href="https://finbazar.ru/profile/Hampfree" target="_blank" rel="noopener noreferrer" class="footer-social-link" aria-label="–ü—Ä–æ—Ñ–∏–ª—å –Ω–∞ FinBazar" title="Bazar">
							<span>üíº</span>
						</a>
					</div>
					<p class="footer-text">
						¬© 2025 {SITE_TITLE} | Serious Play
					</p>
				</div>
			</footer>
		</div>
	</body>
</html>
