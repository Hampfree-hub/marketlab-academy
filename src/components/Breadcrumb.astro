---
import { getLangFromUrl, useTranslations, useTranslatedPath } from '../i18n/utils';

interface Props {
	items: Array<{ label: string; href?: string }>;
}

const { items } = Astro.props;
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);
---

<nav class="breadcrumb" aria-label="Breadcrumb">
	<ol>
		<li><a href={translatePath('')}>{t('nav.home')}</a></li>
		{items.map((item, index) => (
			<li>
				<span class="separator">/</span>
				{index === items.length - 1 || !item.href ? (
					<span class="current">{item.label}</span>
				) : (
					<a href={item.href}>{item.label}</a>
				)}
			</li>
		))}
	</ol>
</nav>

<style>
	.breadcrumb {
		margin-bottom: 2rem;
		font-family: 'JetBrains Mono', monospace;
		font-size: 0.8rem;
	}

	ol {
		list-style: none;
		padding: 0;
		margin: 0;
		display: flex;
		flex-wrap: wrap;
		gap: 8px;
	}

	li {
		display: flex;
		align-items: center;
		gap: 8px;
		color: var(--color-text-secondary);
	}

	a {
		color: var(--color-text-secondary);
		text-decoration: none;
	}

	a:hover {
		color: var(--nes-accent-green);
	}

	.separator {
		opacity: 0.3;
	}

	.current {
		color: var(--nes-accent-green);
		font-weight: bold;
	}
</style>
