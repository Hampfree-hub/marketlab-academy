# Local dev troubleshooting

Если “локально ничего не работает”, почти всегда причина одна из этих:

## 1) Открыт `dist/` напрямую (file://)

- **Не открывайте** `dist/ru/index.html` или другие файлы из `dist/` двойным кликом.
- В прод‑сборке интерактив (поиск/фильтры) подключается как `type="module"` скрипт из `/_astro/...`.
- При `file://` такие скрипты/пути **не работают**, поэтому “поиск мёртвый” и поведение может выглядеть сломанным.

Правильно:

- **Dev**: `npm run dev` → открыть `http://127.0.0.1:4321/ru/`
- **Preview (после build)**: `npm run build` → `npm run preview` → открыть `http://127.0.0.1:4321/ru/`

## 2) Открыт не тот адрес / порт

Рекомендуемые URL для проверки:

- Главная RU: `http://127.0.0.1:4321/ru/`
- Библиотека RU: `http://127.0.0.1:4321/ru/library/`

Если открываете `http://localhost:4321/` и есть проблемы — попробуйте именно `127.0.0.1`.

## 3) Кэш / Service Worker / “не обновилось”

- Сделайте hard refresh: **Ctrl+F5**
- Или откройте DevTools → Network → включите **Disable cache** и перезагрузите страницу.

## 4) Быстрая самопроверка

- `npm run build` должен проходить без ошибок
- В консоли dev‑сервера не должно быть 500‑ошибок на страницах

